
<!DOCTYPE html>
<html lang="en">
	<head>
		<title>LAS Viewer</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<link rel="stylesheet" href="/css/bootstrap.min.css">
		<link rel="stylesheet" href="/css/bootstrap-theme.min.css">
		<link rel="stylesheet" href="/css/jquery.nouislider.min.css">
		<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>

		<style>
			body {
				color: #333;
				font-size:13px;
				font-family: 'Open Sans', sans-serif;
				background-color: #ddd;
				margin: 0px;
				overflow: hidden;
			}

			#fps {
				position: absolute;
				right: 10px;
				font-size: 20px;
				color: #999;
				top: 10px;
				font-family: 'Consolas', 'Menlo', 'Monaco', Monospace;
			}

			#messages {
				position: absolute;
				left: 10px;
				bottom: 10px;
				font-size: 12px;
				color: #999;
				font-family: 'Consolas', 'Menlo', 'Monaco', Monospace;
			}

			#container {
				position: absolute;
				left: 0px;
				top: 0px;
				width: 100%;
				bottom: 0px;
				overflow: hidden;
			}

			#control-panel {
				position: absolute;
				font-family: sans-serif;
				left: 0px;
				top: 0px;
				height: 200px;
				width: 100%;
				background-color: #444444;
				padding: 10px;
				box-sizing: border-box;
			}
			#control-panel .title {
				text-transform: uppercase;
				padding-bottom: 5px;
			}
			/* format the text inside the toggler */
			.ui-layout-toggler .content {
				font-size: 12px; /* IMPORTANT: default = 1px */
				font-weight: bold;
				text-align: center;
				color: green;
			}

			// 'important' required ONLY when applyDefaultStyles=true
			.ui-layout-resizer {
				background-color: #666 !important;
			}

			.ui-layout-east {
				background-color: #666;
				padding: 0px;
				margin: 0px;
			}

			#mainActions {
				margin: 0px 10px;
			}

			.section {
				margin-bottom: 20px;
			}

			.section h3 {
				color: #666;
				font-weight: bold;
				text-transform: uppercase;
				border-bottom: 1px solid #666;
				font-size: 18px;

				padding: 0px;
				margin: 0 0 10px 0;
			}

			.props tr td:last-child {
				text-align: right;
				font-weight: bold;
			}

			#loaderProgress {
				padding: 10px 0px;
				box-sizing: border-box;
			}
			#loaderProgress p {
				padding: 0px;
				margin: 0px;
			}

			#loaderProgress .progress {
				margin: 0px;
			}

			.btn-file {
				position: relative;
				overflow: hidden;
			}
			.btn-file input[type=file] {
				position: absolute;
				top: 0;
				right: 0;
				min-width: 100%;
				min-height: 100%;
				font-size: 999px;
				text-align: right;
				filter: alpha(opacity=0);
				opacity: 0;
				outline: none;
				background: white;
				cursor: inherit;
				display: block;
			}

			.labeled-controls {
				margin-bottom: 20px;
				background-color: #eee;
				padding: 15px 10px;
			}
			.labeled-controls h4 {
				color: #3E754E;
				text-transform: uppercase;
				font-weight: bold;
				font-size: 15px;
				margin: 0px;
			}

			.labeled-controls h5 {
				margin-top: 5px;
				margin-bottom: 15px;
				color: #aaa;
				font-size: 12px;
				line-height: 14px;
				letter-spacing: 0px;
			}
			.map-picker {
				text-align: center;
			}

			.map-picker img {
				height: 10px;
				width: 75%;
			}

			#browse .dropdown-lead{
				width: 92%;
				box-sizing: border-box;
			}
			#browse .dropdown-toggle{
				width: 8%;
				box-sizing: border-box;
			}

		</style>
	</head>
	<body data-custom-load="true" data-name="plasio_laszip"
		data-tools="" data-configs="" data-path="">
		<div class="ui-layout-center">
			<div id="container"></div>
			<div id="fps"></div>
			<div id="messages"></div>
			<div id="pointCount"></div>
		</div>
		<div class="ui-layout-east">
			<div id="mainActions">
				<div class="section">
					<h3>File</h3>
					<div class="labeled-controls">
						<h4>Fidelity</h4>
						<h5>Set the fidelity of the files to load, use lower values to load faster and on lower end hardware</h5>
						<div id="loadFidelity"></div>
					</div>

					<div class="btn-group btn-block" id="browse">
						<button type="button" class="btn btn-default btn-sm btn-file dropdown-lead">
							Browse <input type="file">
						</button>
						<button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown">
							<span class="caret"></span>
							<span class="sr-only">Toggle Dropdown</span>
						</button>
						<ul class="dropdown-menu btn-block" role="menu">
							<li><a href="#">St. Helens</a></li>
							<li><a href="#">Half Dome</a></li>
							<li><a href="#">More Interesting</a></li>
						</ul>
					</div>
					<div id="loaderProgress">
						<div class="progress">
							<div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="20"
								aria-valuemin="0" aria-valuemax="100" style="width: 20%;">
							</div>
						</div>
						<p>Loading...</p>
					</div>
					<table class="props table">
					</table>
				</div>

				<div class="section">
					<h3>Camera</h3>
					<div class="labeled-controls">
						<h4>Type</h4>
						<h5>Perspective camera provides a 3D view, while orthographic and top-view cameras provide an ortho views</h5>
						<div style="text-align: center;" :class="btn-toolbar" role="toolbar">
							<div class="btn-group btn-group-sm">
								<button type="button" class="btn btn-default">Perspective</button>
								<button type="button" class="btn btn-default">Orthographic</button>
								<button type="button" class="btn btn-default">Top-View</button>
							</div>
						</div>
					</div>
					<div class="labeled-controls">
						<h4>Field of View</h4>
						<h5>Changing Field of View provides interesting effects, only applies to Perspective Cameras</h5>
						<div id="fov"></div>
					</div>
				</div>

				<div class="section">
					<h3>Data</h3>
					<div class="labeled-controls">
						<h4>Color Source</h4>
						<h5>Different sources provide different perspective of the data.</h5>
						<div class="btn-group btn-block" id="colorsource">
							<button type="button" class="btn btn-sm btn-default btn-block dropdown-toggle" data-toggle="dropdown" target="rgb">
								RGB <span class="caret"></span>
							</button>
							<ul class="dropdown-menu btn-block" role="menu">
								<li><a href="#rgb">RGB</a></li>
								<li><a href="#intensity">Intensity</a></li>
								<li><a href="#classification">Classification</a></li>
								<li><a href="#heightmap">Heightmap Grayscale</a></li>
								<li><a href="#heightmap-color">Heightmap Color</a></li>
							</ul>
						</div>
					</div>
					<div class="labeled-controls">
						<h4>Intensity Scaling</h4>
						<h5>Narrow down on a range of intensity values</h5>
						<div id="intensity"></div>
					</div>
					<div class="labeled-controls">
						<h4>Colormap</h4>
						<h5>Color gradient values used for Heightmap Color and Classification color sources</h5>
						<div class="btn-group btn-block map-picker" id="colormap">
							<button type="button" class="btn btn-sm btn-default btn-block dropdown-toggle" data-toggle="dropdown">
								<img src="/colormaps/heat-map.png"> <span class="caret"></span>
							</button>
							<ul class="dropdown-menu btn-block" role="menu" style="text-align: center">
								<li><a href="#"><img src="/colormaps/blue-hue.png"></a></li>
								<li><a href="#"><img src="/colormaps/blue-orange.png"></a></li>
								<li><a href="#"><img src="/colormaps/heat-map.png"></a></li>
								<li><a href="#"><img src="/colormaps/awesome-green.png"></a></li>
								<li><a href="#"><img src="/colormaps/pestel-shades.png"></a></li>
								<li><a href="#"><img src="/colormaps/black-orange.png"></a></li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div id="listener"></div>

		<script src="js/jquery.js"></script>
		<script src="js/jquery.ui.js"></script>
		<script src="js/jquery.layout.js"></script>
		<script src="js/bootstrap.min.js"></script>
		<script src="js/jquery.nouislider.min.js"></script>
		<script src="js/bluebird.js"></script>
		<script src="js/common.js"></script>
		<script src="js/three.js"></script>
		<script src="js/Detector.js"></script>
		<script src="js/controls/TrackballControls.js"></script>
		<script src="js/laslaz.js"></script>
		<script src="js/render.js"></script>
		<script src="js/ui.js"></script>
		<script src="js/client.js"></script>
		<script type="x-shader/x-vertex" id="vertexshader">
			uniform float pointSize;

			uniform float rgb_f;
			uniform float intensity_f;
			uniform float class_f;
			uniform float height_f;
			uniform float map_f;

			uniform float clampLower;
			uniform float clampHigher;
			uniform vec2  zrange;
			uniform vec3  offsets;
			uniform sampler2D map;

			attribute vec3 color;
			attribute float intensity;
			attribute float classification;

			varying vec4 col;


			void main() {
				vec3 fpos = vec3(position.x - offsets.x,
								 position.z - offsets.z,
								 position.y - offsets.y);

				vec4 mvPosition = modelViewMatrix * vec4( fpos, 1.0 );
				gl_Position = projectionMatrix * mvPosition;

				float i = (intensity - clampLower) / (clampHigher - clampLower);
				vec3 intensity_color = vec3(i, i, i);

				float nheight = (position.z - zrange.x) / (zrange.y - zrange.x);

				vec3 height_color = vec3(nheight, nheight, nheight);
				vec3 map_color = texture2D(map, vec2(nheight, 0.5)).rgb;
				vec3 class_color = texture2D(map, vec2(classification / 12.0, 0.5)).rgb;

				gl_PointSize = pointSize;
				col = vec4(color * rgb_f +
					  intensity_color * intensity_f +
					  class_color * class_f +
					  height_color * height_f +
					  map_color * map_f, 1.0);
			}
		</script>
		<script type="x-shader/x-fragment" id="fragmentshader">
			varying vec4 col;

			void main() {
				gl_FragColor = col;
			}
		</script>
	</body>
</html>

